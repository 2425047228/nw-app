<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>水洗条码打印</title>
    <link rel="stylesheet" href="base.css">
    <style>
        body{width: 11cm;overflow-x: hidden;}
        img{height: .6cm;width: 4cm}
        .row{
            height: 1.2cm;
            display: -webkit-flex;
            display: flex;
            justify-content: center;
        }
        .row>div{
            display: -webkit-flex;
            display: flex;
            flex-direction:column;
            justify-content:center;
        }
    </style>
</head>
<body>
    <div id="container">
    </div>
    <script src="JsBarcode.min.js"></script>
    <script src="common.js"></script>
    <script>
        _.init(function() {
            _.page('clean_tag_printer_width', 'clean_tag_printer_font_size', 'clean_tag_printer_unit');
            try {
                var data = JSON.parse(_.GET.data);
            } catch (e) {
                data = [];
            }
            var len = data.length
            ,   container = _.first('#container')
            ,   nodeList = [];
            for (var i = 0;i < len;++i) {
                nodeList[i] = {
                    box:_.create('div', 'row'),
                    first:_.create('div'),
                    img:_.create('img'),
                    f_span:_.create('span', null, data[i].clothing_number),
                    second:_.create('div'),
                    s_span:_.create('span', null, '名称：' + data[i].clothing_name),
                    s_span2:_.create('span', null, '颜色：' + data[i].clothing_color),
                    s_span3:_.create('span', null, '挂号：' + data[i].grid_num),
                };
                nodeList[i].box.appendChild(nodeList[i].first);
                nodeList[i].box.appendChild(nodeList[i].second);
                nodeList[i].first.appendChild(nodeList[i].img);
                nodeList[i].first.appendChild(nodeList[i].f_span);
                nodeList[i].second.appendChild(s_span);
                nodeList[i].second.appendChild(s_span2);
                nodeList[i].second.appendChild(s_span3);
                container.appendChild(nodeList[i].box);
                _.barcode(nodeList[i].img, data[i].clothing_number);
            }
        });
    </script>
</body>
</html>