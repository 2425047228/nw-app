<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>订单打印</title>
    <link rel="stylesheet" href="base.css">
    <style>
        body{width: 5.8cm}
    </style>
</head>
<body>
    <div id="mname" class="t-c" onclick="_.print();">店铺简称</div>
    <div class="t-c" id="title">留底单</div>
    <i class="dashed"></i>
    订单号:<span id="sn">68574930296857483734</span><br/>
    <img id="barcode" class="barcode"><br/>
    打印时间:<span id="now"></span><br/>
    <i class="dashed empty"></i>
    衣物编码&emsp;&emsp;衣物名称&emsp;&emsp;颜色<br/>
    <div id="clothes"></div>
    <i class="dashed empty"></i>
    总件数:<span id="count">3</span><br/>
    总金额:&yen;<span id="total">30000</span><br/>
    可折金额:&yen;<span id="dis_amount">30000</span><br/>
    不可折金额:&yen;<span id="amount">30000</span><br/>
    付款方式:<span id="gateway">现金</span><br/>
    折扣:<span id="discount">8</span><br/>
    折后价:<span id="real_amount">10000</span><br/>
    优惠:&yen;<span id="reduce">20000</span> <span id="reduce_cause">各种原因</span><br/>
    现金券:&yen;<span id="coupon">100</span> <span id="coupon_name">各种原因现金券</span><br/>
    实收:&yen;<span id="pay_amount">11554</span><br/>
    找零:&yen;<span id="change">894</span><br/>
    欠款:&yen;<span id="debt">50</span><br/>
    卡号:<span id="number">454555444444454</span><br/>
    余额:&yen;<span id="balance">4555</span><br/>
    <i class="dashed"></i>
    客户姓名:<span id="name">yangyunlong</span><br/>
    客户电话:<span id="phone">15011540794</span><br/>
    取衣时间:<span id="time">2018-11-12 05:07:00</span><br/>
    <i class="dashed"></i>
    操作员:<span id="employee">cidefdf</span><br/>
    <div id="addr_box" style="display: none">店铺地址:<span id="addr">dfdffddfdfdfdfdfffd</span></div>
    <div id="mphone_box" style="display: none">服务热线:<span id="mphone">01055445655</span></div>
    <i class="dashed"></i>
    <div id="ad" style="display: none">广告地址打发打发发达地方的打发打发打发打发的</div>
    <!-- js -->
    <script src="JsBarcode.min.js"></script>
    <script src="common.js"></script>
    <script>
    _.win.showDevTools();
    window.onload = function() {
        _.now();
        var get = _.GET;
        
        for (var i = 0;i < 2;++i) {
            _.inner(
                '#clothes', 
                '<i class="empty"></i>' + 
                '<div>3958674958673029 上衣 灰色</div>' +
                '<div>品牌:香奈儿</div>' +
                '<div>瑕疵:各种问题</div>' +
                '<div>洗后预估:发白,变丑</div>' +
                '<div>单价:1500.00 打折</div>' +
                '<div>加价工艺名称:100 不打折</div>' +
                '<div>加价工艺名称2:10000.00 不可打折</div>'
            );
        }
        if (_.GET.take) {
            _.inner('#title', '洗衣单');
            _.show('#addr_box');
            _.show('#mphone_box');
            _.show('#ad');
        }
        _.inner('#mname', localStorage.getItem('mname'));
        _.inner('#employee', localStorage.getItem('aname'));
        console.log(_.GET);
        /*
            sn:订单编号;items:项目json字符串;total:总金额;dis_amount:可折金额;amount:不可折金额;gateway:支付方式;discount:折扣;real_amount:折后价;
            reduce:优惠;reduce_cause:优惠原因;coupon:现金券;coupon_name:现金券名称;pay_amount:实收;change:找零;debt:欠款;number:卡号;balance:余额;
            name:客户姓名;phone:客户电话;time:取衣时间;addr:店铺地址;mphone:店铺电话;ad:店铺广告;
        */
        _.inner('#sn', get.sn);
        _.barcode('#barcode', get.sn);
        _.inner('#total', get.total);
        _.inner('#dis_amount', get.dis_amount);
        _.inner('#amount', get.amount);
        _.inner('#gateway', get.gateway);
        _.inner('#discount', get.discount);
        _.inner('#real_amount', get.real_amount);
        get.reduce ? _.inner('#reduce', get.reduce) : _.hidd('#reduce');
        get.reduce_cause ? _.inner('#reduce', get.reduce_cause) : _.hidd('#reduce_cause');
        get.coupon ? _.inner('#coupon', get.coupon) : _.hidd('#coupon');
        get.coupon_name ? _.inner('#reduce', get.coupon_name) : _.hidd('#coupon_name');
        get.pay_amount ? _.inner('#pay_amount', get.pay_amount) : _.hidd('#pay_amount');
        get.change ? _.inner('#change', get.change) : _.hidd('#change');
        get.debt ? _.inner('#debt', get.debt) : _.hidd('#debt');
        get.number ? _.inner('#number', get.number) : _.hidd('#number');
        get.balance ? _.inner('#balance', get.balance) : _.hidd('#balance');
        _.inner('#name', get.name);
        _.inner('#phone', get.phone);
        _.inner('#time', get.time);
        _.inner('#addr', get.addr);
        _.inner('#mphone', get.mphone);
        _.inner('#ad', get.ad);
        if (get.items) {
            var items;
            try {
                items = JSON.parse(get.items);
            } catch (e) {
                items = [];
            }
            var len = items.length;
            for (var i = 0;i < len;++i) {
                _.inner(
                    '#clothes', 
                    '<i class="empty"></i>' + 
                    '<div>3958674958673029 上衣 灰色</div>' +
                    '<div>品牌:香奈儿</div>' +
                    '<div>瑕疵:各种问题</div>' +
                    '<div>洗后预估:发白,变丑</div>' +
                    '<div>单价:1500.00 打折</div>' +
                    '<div>加价工艺名称:100 不打折</div>' +
                    '<div>加价工艺名称2:10000.00 不可打折</div>'
                );
            }
        }
        //console.log(JSON.parse(_.GET.data));
        //_.print();
    }
    </script>
</body>
</html>